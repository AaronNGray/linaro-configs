- job:
    name: linux-linaro-tracking-ll
    project-type: matrix
    defaults: global
    logrotate:
        daysToKeep: 30
        numToKeep: 30
    properties:
        - authorization:
            anonymous:
                - job-read
                - job-extended-read
    parameters:
        - password:
            name: PUBLISH_KEY
            default: foo
    disabled: false
    node: build
    child-workspace: .
    display-name: 'linux-linaro kernel'
    scm:
        - git:
            url: git://git.linaro.org/kernel/linux-linaro-tracking.git
            refspec: +refs/heads/linux-linaro:refs/remotes/origin/linux-linaro
            name: origin
            branches:
                - origin/linux-linaro
            skip-tag: true
            shallow-clone: true
            wipe-workspace: false
    axes:
        - axis:
            type: user-defined
            name: hwpack
            values:
                - arndale
                - arndale-octa
                - arndale-uprobes
                - beaglebone
                - beaglebone-uprobes
                - ifc6410
                - panda
                - vexpress
                - vexpress64
        - axis:
            type: slave
            name: label
            values:
                - build
    execution-strategy:
        sequential: true
    wrappers:
        - timestamps
        - copy-to-slave:
            includes:
                - gcc-linaro-arm-linux-gnueabihf-4.9-2014.08_linux.tar.xz
                - gcc-linaro-aarch64-linux-gnu-4.9-2014.08_linux.tar.xz
        - build-name:
            name: '#${BUILD_NUMBER}-${GIT_REVISION,length=8}'
        - matrix-tie-parent:
            node: build
    builders:
        - shell: |
            #!/bin/bash

            rm -rf linux-linaro-kernel-ci
            git clone --depth 1 -b ll git://git.linaro.org/ci/linux-linaro-kernel-ci.git
            bash linux-linaro-kernel-ci/ll-ci.sh</command>
        - trigger-builds:
            - project: 'post-build-lava'
              property-file: post_build_lava_parameters
    publishers:
        - archive:
            artifacts: 'post_build_lava_parameters, custom_lava_job_definition.json, kernel_config_ifc6410, zImage_ifc6410, *-linaro-ifc6410-*.deb'
        - email-ext:
            recipients: 'andrey.konovalov@linaro.org, fathi.boudra@linaro.org'
            attach-build-log: true
            matrix-trigger: both
        - trigger:
            project: 'linux-linaro-tracking-ll-ifc6410-image'
            threshold: SUCCESS
