{
  "actions": [
    {
      "command": "deploy_linaro_kernel",
      "parameters": {
        "bootloadertype": "uefi",
        "firmware": "${QEMU_EFI_URL}",
        "kernel": "${KERNEL_URL}",
        "rootfs": "${IMAGE_URL}"
      },
      "metadata": {
        "build id": "${BUILD_NUMBER}",
        "git URL": "${GIT_URL}",
        "git branch": "${GIT_BRANCH}",
        "git commit": "${GIT_COMMIT}",
        "template": "qemu-aarch64-uefi"
      }
    },
    {
      "command": "boot_linaro_image",
      "parameters": {
        "boot_cmds": [
          "sendline 3",
          "expect Choice:",
          "sendline 1",
          "expect Select the Boot Device:",
          "sendline 1",
          "expect File path of the EFI Application or the kernel:",
          "sendline Image",
          "expect Is an EFI Application? [y/n]",
          "sendline y",
          "expect Is your application an OS loader? [y/n]",
          "sendline n",
          "expect Arguments to pass to the EFI Application:",
          "sendline debug uefi_debug ignore_loglevel rootwait root=/dev/vda2 rootfstype=ext4 rw console=ttyAMA0 earlycon uefi_debug acpi=force",
          "expect Description for this new Entry:",
          "sendline LAVA",
          "expect Choice:",
          "sendline 7",
          "expect Start:",
          "sendline 2"
        ]
      }
    },
    {
      "command": "lava_command_run",
      "parameters": {
        "commands": [
          "dmesg|grep 'rtc-efi rtc-efi: setting system clock to'"
        ],
        "timeout": 900
      }
    },
    {
      "command": "submit_results",
      "parameters": {
        "server": "http://${LAVA_SERVER}",
        "stream": "${BUNDLE_STREAM_NAME}"
      }
    }
  ],
  "device_type": "${DEVICE_TYPE}",
  "job_name": "${BUILD_URL}",
  "timeout": 1800
}
